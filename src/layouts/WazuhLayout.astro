---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/global/Footer.astro";
import Analytics from "@vercel/analytics/astro";
import SpeedInsights from "@vercel/speed-insights/astro";

interface Props {
  title?: string;
  description?: string;
  canonical?: string;
  ogImage?: string;
}

const {
  title,
  description,
  canonical,
  ogImage = "https://aisecurity.es/og-image.png"
} = Astro.props;
---

<html
  lang="es"
  class="scroll-smooth selection:bg-accent-500 selection:text-white no-touchevents hydrated">
  <head>
    <BaseHead
      title={title}
      description={description}
      canonical={canonical}
      ogImage={ogImage}
    />
  </head>
  <body class="bg-base-50 flex flex-col min-h-svh">
    <!-- Wazuh Header -->
    <header
      id="main-header"
      class="border-b border-base-200 sticky top-0 z-50 bg-base-50/95 backdrop-blur-md shadow-soft transition-all duration-300">
      <div class="w-full mx-auto px-6 max-w-7xl">
        <div
          x-data="{ open: false }"
          class="relative flex flex-col w-full py-2.5 mx-auto lg:items-center lg:justify-between lg:flex-row">

          <!-- Logo -->
          <div class="flex flex-row items-center justify-between lg:justify-start">
            <a href="/wazuh" class="text-base-900 inline-flex items-center gap-2.5 hover:opacity-80 transition-opacity">
              <svg class="w-9 h-9" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="3" width="7" height="7" rx="1" fill="#0ea5e9"/>
                <rect x="3" y="14" width="7" height="7" rx="1" fill="#0ea5e9"/>
                <rect x="14" y="3" width="7" height="7" rx="1" fill="#0ea5e9"/>
                <rect x="14" y="14" width="7" height="7" rx="1" fill="#0ea5e9"/>
              </svg>
              <span class="font-bold text-lg tracking-tight">WazuhSec</span>
            </a>

            <!-- Mobile Menu Button -->
            <button
              @click="open = !open"
              :aria-expanded="open.toString()"
              aria-controls="main-navigation"
              aria-label="Alternar menú de navegación"
              class="inline-flex items-center justify-center p-2.5 text-base-600 hover:text-base-900 hover:bg-base-100 rounded-lg focus:outline-none focus:text-base-900 lg:hidden transition-colors">
              <svg
                :class="{'rotate-90': open}"
                class="w-6 h-6 transition-transform duration-300 ease-in-out"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true">
                <path
                  x-show="!open"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16">
                </path>
                <path
                  x-show="open"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12">
                </path>
              </svg>
            </button>
          </div>

          <!-- Navigation -->
          <nav
            :class="{'flex': open, 'hidden': !open}"
            id="main-navigation"
            class="flex-col items-start gap-1 lg:flex lg:flex-row lg:items-center lg:gap-1 lg:ml-auto mt-4 lg:mt-0"
            role="navigation"
            aria-label="Navegación principal">

            <!-- Soluciones IA -->
            <a
              href="/"
              class="w-full lg:w-auto text-sm font-medium transition-colors duration-200 px-3 py-2 rounded-lg text-base-800 hover:text-accent-600 hover:bg-accent-50">
              Soluciones IA
            </a>

            <!-- Soluciones -->
            <a
              href="#demo"
              class="w-full lg:w-auto text-sm font-medium transition-colors duration-200 px-3 py-2 rounded-lg text-base-800 hover:text-accent-600 hover:bg-accent-50">
              Soluciones
            </a>

            <!-- Opiniones -->
            <a
              href="#faq"
              class="w-full lg:w-auto text-sm font-medium transition-colors duration-200 px-3 py-2 rounded-lg text-base-800 hover:text-accent-600 hover:bg-accent-50">
              Opiniones
            </a>

            <!-- Precios -->
            <a
              href="#pricing"
              class="w-full lg:w-auto text-sm font-medium transition-colors duration-200 px-3 py-2 rounded-lg text-base-800 hover:text-accent-600 hover:bg-accent-50">
              Precios
            </a>

            <!-- CTA Button -->
            <a
              href="/reunion"
              class="w-full lg:w-auto inline-flex items-center justify-center gap-2 px-5 py-2.5 bg-accent-600 hover:bg-accent-700 text-sm font-bold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg hover:-translate-y-0.5 mt-2 lg:mt-0 lg:ml-2"
              style="color: #000000;">
              Solicita información
            </a>
          </nav>
        </div>
      </div>
    </header>

    <main class="grow"><slot /></main>
    <Footer />
    <Analytics />
    <SpeedInsights />

    <!-- Header Scroll Script -->
    <script>
      const header = document.getElementById('main-header');

      window.addEventListener('scroll', () => {
        if (window.scrollY > 20) {
          header?.classList.add('shadow-medium');
        } else {
          header?.classList.remove('shadow-medium');
        }
      });
    </script>
  </body>
</html>
